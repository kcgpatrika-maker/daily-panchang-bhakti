<script src="data.js"></script>

<script>
/* ========= ALIAS MAP (English + Short Names) ========= */
const aliasMap = {
  shiv: "рд╢рд┐рд╡",
  shiva: "рд╢рд┐рд╡",
  mahadev: "рд╢рд┐рд╡",
  bholenath: "рд╢рд┐рд╡",

  hanuman: "рд╣рдиреБрдорд╛рди",
  bajrang: "рд╣рдиреБрдорд╛рди",
  bajrangbali: "рд╣рдиреБрдорд╛рди",

  diwali: "рджреАрдкрд╛рд╡рд▓реА",
  deepavali: "рджреАрдкрд╛рд╡рд▓реА",
  deepawali: "рджреАрдкрд╛рд╡рд▓реА"
};

/* ========= SEO PAGES ========= */
const seoPages = {
  "рд╢рд┐рд╡": "shiv.html",
  "рд╣рдиреБрдорд╛рди": "hanuman.html",
  "рджреАрдкрд╛рд╡рд▓реА": "diwali.html"
};

function handleAsk() {
  let input = document.getElementById("askInput").value.trim().toLowerCase();
  const box = document.getElementById("askResult");
  box.innerHTML = "";

  if (!input) return;

  // ЁЯФ╣ English тЖТ Hindi
  if (aliasMap[input]) {
    input = aliasMap[input];
  }

  // ЁЯФ╣ SEO page direct
  for (let key in seoPages) {
    if (input.includes(key)) {
      box.innerHTML = `
        <a href="${seoPages[key]}" class="seo-link">
          ЁЯСЙ ${key} рд╕реЗ рдЬреБрдбрд╝реА рдкреВрд░реА рдЬрд╛рдирдХрд╛рд░реА рдкрдврд╝реЗрдВ
        </a>
      `;
      return;
    }
  }

  // ЁЯФ╣ bhaktiData smart search
  const found = bhaktiData.find(item =>
    item.name && item.name.includes(input)
  );

  if (found && found.contents) {
    found.contents.forEach(c => {
      const btn = document.createElement("button");
      btn.textContent = c.type + " : рдкреВрд░рд╛ рдкрдврд╝реЗрдВ";
      btn.onclick = () =>
        openModal(found.name + " тАУ " + c.type, c.info);
      box.appendChild(btn);
    });
    return;
  }

  // ЁЯФ╣ Nothing found
  box.innerText = "ЁЯЩП рдЬрд╛рдирдХрд╛рд░реА рд╢реАрдШреНрд░ рдЬреЛрдбрд╝реА рдЬрд╛рдПрдЧреАред";
}

/* ========= MODAL ========= */
function openModal(title, body) {
  document.getElementById("modalTitle").innerText = title;
  document.getElementById("modalBody").innerText = body;
  document.getElementById("askModal").style.display = "block";
}

function closeModal() {
  document.getElementById("askModal").style.display = "none";
}

function resetAsk() {
  document.getElementById("askInput").value = "";
  document.getElementById("askResult").innerHTML = "";
}
</script>
