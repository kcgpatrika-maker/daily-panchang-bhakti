<!-- ASK -->
<div class="card ask-box">
  <h3>üôè ‡§¶‡•á‡§µ‡•Ä-‡§¶‡•á‡§µ‡§§‡§æ ‡§Ø‡§æ ‡§§‡•ç‡§Ø‡•ã‡§π‡§æ‡§∞ ‡§ñ‡•ã‡§ú‡•á‡§Ç</h3>
  <input id="query" placeholder="‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç...">
  <button onclick="askFree()">Ask</button>
  <button onclick="resetAsk()">Reset</button>
  <div id="result" class="result"></div>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">√ó</span>
    <h3 id="modalTitle"></h3>
    <div id="modalBody"></div>
  </div>
</div>

<script>
function askFree() {
  const query = document.getElementById("query").value.trim().toLowerCase();
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = "";

  if(!query) return;

  const found = bhaktiData.filter(item => item.name.toLowerCase().includes(query));
  if(found.length === 0){
    resultDiv.innerText = "‡§Æ‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç, content ‡§Ö‡§≠‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§";
    return;
  }

  found.forEach(item => {
    item.contents.forEach(c => {
      const btn = document.createElement("button");
      btn.innerText = c.type + " : ‡§™‡•Ç‡§∞‡§æ ‡§™‡§¢‡§º‡•á‡§Ç";
      btn.onclick = () => openModal(c.type, c.info);
      btn.style.margin="4px 0";
      resultDiv.appendChild(btn);
    });
  });
}

/* Modal Functions */
function openModal(title, body){
  document.getElementById("modalTitle").innerText = title;
  document.getElementById("modalBody").innerText = body;
  document.getElementById("modal").style.display = "block";
}
function closeModal(){ document.getElementById("modal").style.display = "none"; }
function resetAsk(){ document.getElementById("query").value=""; document.getElementById("result").innerHTML=""; }
</script>
